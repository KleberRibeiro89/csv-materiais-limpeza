<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSV Materiais de Limpeza</title>
    
    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="favicon_io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon_io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon_io/favicon-16x16.png">
    <link rel="manifest" href="favicon_io/site.webmanifest">
    <link rel="shortcut icon" href="favicon_io/favicon.ico">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav>
        <div class="navbar">
            <div class="logo-container">
                <img src="images/Logo CSV Materiais de Limpeza.png" alt="Logo CSV Materiais de Limpeza" class="logo">
                <p class="slogan">Tudo para a limpeza da sua empresa e residência</p>
            </div>
            <ul class="menu" id="menu">
                <li><a href="#inicio">Início</a></li>
                <li><a href="#sobre">Sobre</a></li>
                <li><a href="#produtos">Produtos</a></li>
                <li><a href="#contato">Contato</a></li>
            </ul>
            <div class="menu-toggle" id="menuToggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <main class="main-content">
        <section class="hero" id="inicio">
            <h1>CSV Materiais de Limpeza</h1>
            <p class="subtitle">Tudo para a limpeza da sua empresa e residência</p>
            
            <div class="featured-products">
                <h2 class="featured-title">Produtos Mais Vendidos</h2>
                <div class="carousel-container">
                    <button class="carousel-btn carousel-btn-prev" id="prevBtn" aria-label="Produto anterior">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M15 18l-6-6 6-6"/>
                        </svg>
                    </button>
                    <div class="carousel-wrapper">
                        <div class="carousel-track" id="carouselTrack">
                            <!-- Produtos serão inseridos via JavaScript -->
                        </div>
                    </div>
                    <button class="carousel-btn carousel-btn-next" id="nextBtn" aria-label="Próximo produto">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 18l6-6-6-6"/>
                        </svg>
                    </button>
                    <div class="carousel-dots" id="carouselDots">
                        <!-- Dots serão inseridos via JavaScript -->
                    </div>
                </div>
            </div>
        </section>

        <section class="about-section" id="sobre">
            <h2>Sobre Nós</h2>
            <p>
                A CSV Materiais de Limpeza é uma empresa especializada no fornecimento de materiais de limpeza industrial, oferecendo soluções completas para empresas de todos os portes. Com anos de experiência no mercado, nos destacamos pela qualidade dos produtos, atendimento personalizado, entrega rápida e compromisso com a satisfação dos nossos clientes.
            </p>
            <p>
                Nossa linha de produtos inclui desde produtos químicos especializados até equipamentos e acessórios de limpeza, sempre priorizando a eficiência, segurança e sustentabilidade. Trabalhamos com as melhores marcas do mercado e oferecemos produtos que atendem aos mais rigorosos padrões de qualidade e normas de segurança.
            </p>
            <p>
                Entendemos que cada empresa possui necessidades específicas, por isso oferecemos consultoria especializada para ajudar nossos clientes a escolherem os produtos mais adequados para suas operações. Nossa equipe está sempre pronta para fornecer suporte técnico e orientações sobre o uso correto dos produtos, garantindo máxima eficácia e segurança no ambiente de trabalho.
            </p>
            <p>
                Seja para limpeza pesada, manutenção preventiva ou higienização especializada, a CSV Materiais de Limpeza é sua parceira ideal para manter o ambiente de trabalho limpo, seguro e produtivo.
            </p>
        </section>

        <section class="products-section" id="produtos">
            <h2>Nossos Produtos</h2>
            <div class="products-grid" id="productsGrid">
                <!-- Produtos serão inseridos aqui via JavaScript -->
            </div>
        </section>

        <!-- Modal de Detalhes do Produto -->
        <div class="modal" id="productModal">
            <div class="modal-content">
                <span class="modal-close" id="modalClose">&times;</span>
                <div class="modal-body" id="modalBody">
                    <!-- Conteúdo será inserido via JavaScript -->
                </div>
            </div>
        </div>

        <section class="contact-section" id="contato">
            <h2>Entre em Contato</h2>
            <p>Fale conosco pelo WhatsApp e tire suas dúvidas sobre nossos produtos e serviços!</p>
            <p class="phone-number">Telefone: <a href="tel:+5511940444564">(11) 94044-4564</a></p>
            <a href="https://wa.me/5511940444564?text=Ol%C3%A1%21%20Vim%20do%20site%20da%20CSV%20Materiais%20de%20Limpeza%20e%20gostaria%20de%20saber%20mais%20sobre%20os%20materiais%20de%20limpeza%20industrial%20que%20voc%C3%AAs%20fornecem." target="_blank" class="whatsapp-link">
                <svg class="whatsapp-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
                </svg>
                Fale Conosco no WhatsApp
            </a>
        </section>
    </main>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>CSV Materiais de Limpeza</h3>
                <p>Tudo para a limpeza da sua empresa e residência</p>
            </div>
            <div class="footer-section">
                <h4>Links Rápidos</h4>
                <ul>
                    <li><a href="#inicio">Início</a></li>
                    <li><a href="#sobre">Sobre</a></li>
                    <li><a href="#produtos">Produtos</a></li>
                    <li><a href="#contato">Contato</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Contato</h4>
                <p>Telefone: <a href="tel:+5511940444564">(11) 94044-4564</a></p>
                <p>Entre em contato conosco pelo WhatsApp</p>
                <a href="https://wa.me/5511940444564?text=Ol%C3%A1%21%20Vim%20do%20site%20da%20CSV%20Materiais%20de%20Limpeza%20e%20gostaria%20de%20saber%20mais%20sobre%20os%20materiais%20de%20limpeza%20industrial%20que%20voc%C3%AAs%20fornecem." target="_blank" class="footer-whatsapp">
                    <svg class="whatsapp-icon-small" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
                    </svg>
                    WhatsApp
                </a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 CSV Materiais de Limpeza. Todos os direitos reservados.</p>
        </div>
    </footer>

    <script src="./data.js"></script>
    
    <script>
        // Menu mobile toggle
        const menuToggle = document.getElementById('menuToggle');
        const menu = document.getElementById('menu');

        menuToggle.addEventListener('click', () => {
            menu.classList.toggle('active');
        });

        // Fechar menu ao clicar em um link
        const menuLinks = document.querySelectorAll('.menu a');
        menuLinks.forEach(link => {
            link.addEventListener('click', () => {
                menu.classList.remove('active');
            });
        });

        // Função para inicializar produtos (usando products do data.js)
        function initProducts() {
            // Verificar se a variável products existe
            if (typeof products === 'undefined') {
                console.error('Variável products não encontrada. Verifique se data.js está carregado corretamente.');
                return;
            }
            
            console.log('Inicializando produtos. Total:', products ? products.length : 0);

            // Função para renderizar produtos
            function renderProducts(productsToRender = products) {
                const productsGrid = document.getElementById('productsGrid');
                const searchResults = document.getElementById('searchResults');
                
                if (!productsGrid) {
                    console.error('Elemento productsGrid não encontrado');
                    return;
                }

                productsGrid.innerHTML = '';

                if (!productsToRender || productsToRender.length === 0) {
                    if (searchResults) {
                        searchResults.textContent = 'Nenhum produto encontrado.';
                        searchResults.style.display = 'block';
                    }
                    return;
                }

                if (searchResults) {
                    searchResults.style.display = 'none';
                    searchResults.textContent = '';
                }

                productsToRender.forEach((product, index) => {
                    const productCard = document.createElement('div');
                    productCard.className = 'product-card';
                    const productName = product.name || 'Produto sem nome';
                    const productDescription = product.description || 'Descrição não disponível';
                    
                    productCard.innerHTML = `
                        <div class="product-image-container">
                            <img src="${product.image}" alt="${productName}" class="product-image" onerror="this.src='images/products/sem-nome001.jfif'">
                        </div>
                        <div class="product-info">
                            <h3 class="product-name">${productName}</h3>
                            <p class="product-description">${productDescription.substring(0, 150)}${productDescription.length > 150 ? '...' : ''}</p>
                        </div>
                    `;
                    
                    // Adicionar evento de clique para abrir o modal
                    productCard.addEventListener('click', () => {
                        openProductModal(product);
                    });
                    
                    productsGrid.appendChild(productCard);
                });
            }

            // Função de busca
            function searchProducts(searchTerm) {
                if (!searchTerm || searchTerm.trim() === '') {
                    renderProducts(products);
                    return;
                }

                const term = searchTerm.toLowerCase().trim();
                const filteredProducts = products.filter(product => {
                    const name = (product.name || '').toLowerCase();
                    const description = (product.description || '').toLowerCase();
                    return name.includes(term) || description.includes(term);
                });

                renderProducts(filteredProducts);
                
                // Atualizar mensagem de resultados
                const searchResults = document.getElementById('searchResults');
                if (searchResults) {
                    if (filteredProducts.length > 0) {
                        searchResults.textContent = `${filteredProducts.length} produto(s) encontrado(s) para "${searchTerm}"`;
                        searchResults.style.display = 'block';
                    } else {
                        searchResults.textContent = 'Nenhum produto encontrado.';
                        searchResults.style.display = 'block';
                    }
                }
            }

            // Event listener para o campo de busca
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('input', (e) => {
                    searchProducts(e.target.value);
                });

                // Buscar ao pressionar Enter
                searchInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        searchProducts(e.target.value);
                    }
                });
            }

            // Renderizar todos os produtos inicialmente
            console.log('Total de produtos carregados:', products.length);
            renderProducts(products);
        }

        // Função para abrir o modal com os detalhes do produto
        function openProductModal(product) {
            const modal = document.getElementById('productModal');
            const modalBody = document.getElementById('modalBody');
            const productName = product.name || 'Produto sem nome';
            const productDescription = product.description || 'Descrição não disponível';
            
            // Formatar a descrição preservando quebras de linha
            const formattedDescription = productDescription.replace(/\n/g, '<br>');
            
            modalBody.innerHTML = `
                <div class="modal-product-image">
                    <img src="${product.image}" alt="${productName}" onerror="this.src='images/products/sem-nome001.jfif'">
                </div>
                <div class="modal-product-info">
                    <h2 class="modal-product-name">${productName}</h2>
                    <div class="modal-product-description">${formattedDescription}</div>
                </div>
            `;
            
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden'; // Prevenir scroll da página
        }

        // Função para fechar o modal
        function closeProductModal() {
            const modal = document.getElementById('productModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto'; // Restaurar scroll da página
        }

        // Event listeners para o modal
        const modalClose = document.getElementById('modalClose');
        const modal = document.getElementById('productModal');
        
        if (modalClose) {
            modalClose.addEventListener('click', closeProductModal);
        }
        
        if (modal) {
            // Fechar ao clicar fora do modal
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeProductModal();
                }
            });
            
            // Fechar com a tecla ESC
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && modal.style.display === 'block') {
                    closeProductModal();
                }
            });
        }

        // Função para inicializar o carrossel (usando featuredProducts do data.js)
        function initCarousel() {
            // Verificar se featuredProducts está disponível
            if (typeof featuredProducts === 'undefined') {
                console.error('featuredProducts não encontrado. Verifique se data.js está carregado corretamente.');
                return;
            }

            let currentSlide = 0;
            const carouselTrack = document.getElementById('carouselTrack');
            const carouselDots = document.getElementById('carouselDots');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            let autoSlideInterval;

            // Verificar se os elementos existem antes de inicializar
            if (!carouselTrack || !carouselDots || !prevBtn || !nextBtn) {
                console.error('Elementos do carrossel não encontrados');
                return;
            }

            // Limpar conteúdo anterior
            carouselTrack.innerHTML = '';
            carouselDots.innerHTML = '';

            // Criar slides do carrossel
            featuredProducts.forEach((product, index) => {
                const slide = document.createElement('div');
                slide.className = 'carousel-slide';
                slide.innerHTML = `
                    <div class="carousel-slide-content">
                        <div class="carousel-image-container">
                            <img src="${product.image}" alt="${product.name}" class="carousel-image" onerror="this.src='images/products/sem-nome001.jfif'">
                        </div>
                        <h3 class="carousel-product-name">${product.name}</h3>
                    </div>
                `;
                carouselTrack.appendChild(slide);

                // Criar dots
                const dot = document.createElement('button');
                dot.className = 'carousel-dot';
                dot.setAttribute('aria-label', `Ir para slide ${index + 1}`);
                dot.addEventListener('click', () => goToSlide(index));
                carouselDots.appendChild(dot);
            });

            const slides = document.querySelectorAll('.carousel-slide');
            const dots = document.querySelectorAll('.carousel-dot');

            // Função para atualizar o carrossel
            function updateCarousel() {
                carouselTrack.style.transform = `translateX(-${currentSlide * 100}%)`;
                
                // Atualizar dots
                dots.forEach((dot, index) => {
                    dot.classList.toggle('active', index === currentSlide);
                });
            }

            // Função para ir para um slide específico
            function goToSlide(index) {
                currentSlide = index;
                if (currentSlide >= slides.length) currentSlide = 0;
                if (currentSlide < 0) currentSlide = slides.length - 1;
                updateCarousel();
                resetAutoSlide();
            }

            // Função para próximo slide
            function nextSlide() {
                currentSlide++;
                if (currentSlide >= slides.length) currentSlide = 0;
                updateCarousel();
                resetAutoSlide();
            }

            // Função para slide anterior
            function prevSlide() {
                currentSlide--;
                if (currentSlide < 0) currentSlide = slides.length - 1;
                updateCarousel();
                resetAutoSlide();
            }

            // Event listeners para os botões
            nextBtn.addEventListener('click', nextSlide);
            prevBtn.addEventListener('click', prevSlide);

            // Navegação automática
            function startAutoSlide() {
                autoSlideInterval = setInterval(nextSlide, 4000);
            }

            function resetAutoSlide() {
                clearInterval(autoSlideInterval);
                startAutoSlide();
            }

            // Pausar carrossel ao passar o mouse
            const carouselContainer = document.querySelector('.carousel-container');
            if (carouselContainer) {
                carouselContainer.addEventListener('mouseenter', () => {
                    clearInterval(autoSlideInterval);
                });

                carouselContainer.addEventListener('mouseleave', () => {
                    startAutoSlide();
                });
            }

            // Inicializar
            updateCarousel();
            startAutoSlide();
        }

        // Função para verificar e inicializar quando tudo estiver pronto
        let attempts = 0;
        const maxAttempts = 100; // 5 segundos máximo (50ms * 100)
        
        function waitAndInit() {
            attempts++;
            
            // Verificar se products e featuredProducts estão disponíveis
            if (typeof products === 'undefined' || typeof featuredProducts === 'undefined') {
                if (attempts < maxAttempts) {
                    setTimeout(waitAndInit, 50);
                } else {
                    console.error('Timeout: Variáveis não foram carregadas após', maxAttempts * 50, 'ms');
                    console.error('Verifique se o arquivo data.js existe e está acessível');
                }
                return;
            }
            
            console.log('Dados carregados com sucesso!');
            console.log('- Products:', products.length);
            console.log('- Featured Products:', featuredProducts.length);
            
            // Verificar se o DOM está pronto
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', function() {
                    initProducts();
                    initCarousel();
                });
            } else {
                // DOM já está pronto
                initProducts();
                initCarousel();
            }
        }
        
        // Iniciar verificação
        console.log('Aguardando carregamento de data.js...');
        
        // Tentar inicializar imediatamente se os dados já estiverem disponíveis
        if (typeof products !== 'undefined' && typeof featuredProducts !== 'undefined') {
            console.log('Dados já disponíveis!');
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', function() {
                    initProducts();
                    initCarousel();
                });
            } else {
                initProducts();
                initCarousel();
            }
        } else {
            // Aguardar carregamento
            waitAndInit();
            
            // Fallback: tentar após window.onload
            window.addEventListener('load', function() {
                if (typeof products !== 'undefined' && typeof featuredProducts !== 'undefined') {
                    const productsGrid = document.getElementById('productsGrid');
                    if (productsGrid && productsGrid.children.length === 0) {
                        console.log('Inicializando após window.onload');
                        initProducts();
                    }
                    initCarousel();
                }
            });
        }
    </script>
</body>
</html>
